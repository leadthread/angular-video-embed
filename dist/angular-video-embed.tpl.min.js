angular.module('zen.video-embed.templates', []).run(['$templateCache', function($templateCache) {$templateCache.put('index.html','<div ng-switch="video.service" style="height: 100%; width: 100%;">\r\n\t<div ng-switch-when="youtube" style="height: 100%; width: 100%;">\r\n\t\t<iframe width="100%" height="100%" ng-src="{{video.url}}" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>\r\n\t</div>\r\n\t<div ng-switch-when="vimeo" style="height: 100%; width: 100%;">\r\n\t\t<iframe width="100%" height="100%" ng-src="{{video.url}}" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>\r\n\t</div>\r\n\t<div ng-switch-default>\r\n\t\tInvalid Video\r\n\t</div>\r\n</div>');}]);
!function(e){"use strict";var r=e.module("zen.video-embed",["zen.video-embed.templates"]);r.factory("zenVideoEmbed",[function(){function e(e,r){var t=r.match(/(?:youtu\.be\/|youtube\.com(?:\/embed\/|\/v\/|\/watch\?v=|\/user\/\S+|\/ytscreeningroom\?v=|\/sandalsResorts#\w\/\w\/.*\/))([^\/&]{10,12})/);return t&&(e.service="youtube",e.id=t[1]),e}function r(e,r){var t=r.match(/https?:\/\/.*?(vimeo)\.com\/([^?&]*)/);return t&&(e.service=["vimeo"].indexOf(t[1])>=0?"vimeo":void 0,e.id=t[2]),e}function t(e){throw'Unknown Video Service: "'+e+'"'}var i=["youtube","vimeo"];return{getSupportedServices:function(){return i},getVideoFromUrl:function(t){return e(r({},t),t)},getUrlFromVideo:function(e){var r="";switch(e.service){case"youtube":r="https://www.youtube.com/embed/"+e.id;break;case"vimeo":r="https://player.vimeo.com/video/"+e.id+"?color=d4bd28&portrait=0&badge=0";break;default:t(e.service)}return r},checkServiceIsValid:function(e){var r=i.indexOf(e.service);return r<0&&t(e.service),!0}}}]),r.directive("zenVideoEmbed",["$sce","zenVideoEmbed",function(e,r){return{restrict:"EA",templateUrl:"index.html",scope:{url:"@",video:"=?"},link:function(t){function i(){n()}function o(){d(),u(),c()}function n(){t.$watch(function(){return t.url},o)}function u(){t.url&&(t.video=r.getVideoFromUrl(t.url))}function c(){t.video.url=e.trustAsResourceUrl(r.getUrlFromVideo(t.video))}function d(){if(!t.url&&!t.video)throw"Neither video or url is defined";return!0}i()}}}])}(angular);