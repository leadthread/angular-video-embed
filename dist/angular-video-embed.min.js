!function(e){"use strict";var t=e.module("zen.video-embed",["zen.video-embed.templates"]);t.factory("zenVideoEmbed",[function(){function e(e,t){var i=t.match(/https?:\/\/.*?(youtube|youtu\.be).*v=([^\?&]*)/);return i&&(e.service=["youtube","youtu.be"].indexOf(i[1])>=0?"youtube":void 0,e.id=i[2]),e}function t(e,t){var i=t.match(/https?:\/\/.*?(vimeo)\.com\/([^?&]*)/);return i&&(e.service=["vimeo"].indexOf(i[1])>=0?"vimeo":void 0,e.id=i[2]),e}function i(e){throw'Unknown Video Service: "'+e+'"'}var r=["youtube","vimeo"];return{getSupportedServices:function(){return r},getVideoFromUrl:function(i){return e(t({},i),i)},getUrlFromVideo:function(e){var t="";switch(e.service){case"youtube":t="https://www.youtube.com/embed/"+e.id;break;case"vimeo":t="https://player.vimeo.com/video/"+e.id+"?color=d4bd28&portrait=0&badge=0";break;default:i(e.service)}return t},checkServiceIsValid:function(e){var t=r.indexOf(e.service);return t<0&&i(e.service),!0}}}]),t.directive("zenVideoEmbed",["$sce","zenVideoEmbed",function(e,t){return{restrict:"EA",templateUrl:"index.html",scope:{url:"@",video:"=?"},link:function(i){function r(){n()}function o(){d(),u(),c()}function n(){i.$watch(function(){return i.url},o)}function u(){i.url&&(i.video=t.getVideoFromUrl(i.url))}function c(){i.video.url=e.trustAsResourceUrl(t.getUrlFromVideo(i.video))}function d(){if(!i.url&&!i.video)throw"Neither video or url is defined";return!0}r()}}}])}(angular);