!function(e){"use strict";var r=e.module("zen.video-embed",["zen.video-embed.templates"]);r.factory("zenVideoEmbed",[function(){function e(e,r){var i=r.match(/(?:youtu\.be\/|youtube\.com(?:\/embed\/|\/v\/|\/watch\?v=|\/user\/\S+|\/ytscreeningroom\?v=|\/sandalsResorts#\w\/\w\/.*\/))([^\/&]{10,12})/);return i&&(e.service="youtube",e.id=i[1]),e}function r(e,r){var i=r.match(/https?:\/\/.*?(vimeo)\.com\/([^?&]*)/);return i&&(e.service=["vimeo"].indexOf(i[1])>=0?"vimeo":void 0,e.id=i[2]),e}function i(e,r){var i=r.match(/https?:\/\/.*?(viddler)\.com\/(embed|v)\/([^?&\/]*)/);return i&&(e.service=["viddler"].indexOf(i[1])>=0?"viddler":void 0,e.id=i[3]),e}function o(e){throw'Unknown Video Service: "'+e+'"'}var t=["youtube","vimeo","viddler"];return{getSupportedServices:function(){return t},getVideoFromUrl:function(o){if("undefined"!=typeof o)return e(r(i({},o),o),o)},getUrlFromVideo:function(e){var r="";switch(e.service){case"youtube":r="https://www.youtube.com/embed/"+e.id+"?rel=0";break;case"vimeo":r="https://player.vimeo.com/video/"+e.id+"?color=d4bd28&portrait=0&badge=0";break;case"viddler":r="https://www.viddler.com/embed/"+e.id+"/?f=1&player=arpeggio&secret=11469889&hideablecontrolbar=1&make_responsive=0&hideCommentEmbedIfNoComments=1&noControls=true";break;default:o(e.service)}return r},checkServiceIsValid:function(e){var r=t.indexOf(e.service);return r<0&&o(e.service),!0}}}]),r.directive("zenVideoEmbed",["$sce","zenVideoEmbed",function(e,r){return{restrict:"EA",templateUrl:"index.html",scope:{url:"@",video:"=?"},link:function(i){function o(){n()}function t(){c(),d(),u()}function n(){i.$watch(function(){return i.url},t)}function d(){i.url&&(i.video=r.getVideoFromUrl(i.url))}function u(){i.video.url=e.trustAsResourceUrl(r.getUrlFromVideo(i.video))}function c(){if(!i.url&&!i.video)throw"Neither video or url is defined";return!0}o()}}}])}(angular);